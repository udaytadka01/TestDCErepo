<template>
    <template if:true={relatedContacts}>
        <template if:true={record}>
            <!-- <lightning-card title={record.Name} class="slds-m-bottom_medium"> -->
            <div class="slds-box slds-var-m-bottom_medium body">
                <header class="slds-media slds-media_center slds-has-flexi-truncate slds-var-m-bottom_small">
                    <div class="slds-media__body">
                        <h2 class="slds-card__header-title">{record.Name}</h2>
                    </div>
                    <div class="slds-no-flex">
                        <lightning-button-group  slot="actions">
                            <lightning-button label="Assign Users" onclick={handleAssignUsers}></lightning-button>
                            <lightning-button label="Remove Users" onclick={handleRemoveUsers}></lightning-button>
                        </lightning-button-group>
                    </div>
                </header>
                <template if:false={noRecordsFound}>
                    <lightning-datatable
                        key-field="id"
                        data={relatedContacts}
                        columns={columns} 
                        onrowaction={handleRowAction}
                        onrowselection={handleSelectedRows}>
                    </lightning-datatable>
                </template>
                <template if:true={noRelatedContactsFound}>
                    <p class="slds-var-p-around_medium">No one is currently assigned to this Practice Group.</p>
                </template>
            </div>
            <!-- </lightning-card> -->
        </template>
    </template>
    <template if:true={selectedAction}>
        <c-ca-user-management-modal action={selectedAction} record-id={selectedActionRowId} onclose={handleModalClose} onsave={handleSave}></c-ca-user-management-modal>
    </template>
    <template if:true={loading}>
        <lightning-spinner alternative-text="Loading"></lightning-spinner>
    </template>
</template>